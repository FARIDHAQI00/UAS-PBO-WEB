<!DOCTYPE html>
<!--
  File ini adalah template HTML untuk halaman laporan pendapatan di bagian admin aplikasi.
  Fungsi utama file ini adalah menampilkan ringkasan statistik transaksi seperti:
  - Total pendapatan yang dihasilkan
  - Total jumlah pesanan
  - Rata-rata nilai pesanan
  - Nilai pesanan tertinggi

  Halaman ini di-render dengan menggunakan Thymeleaf sebagai template engine, 
  dan mengimpor layout umum dari "fragments/header.html" untuk konsistensi tampilan.

  Data statistik transaksi diisi melalui controller AdminController pada method "reports" yang memanggil
  service TransactionService untuk mendapatkan data pendapatan dan transaksi yang relevan.

  Selain menampilkan statistik, halaman ini juga menyediakan beberapa tindakan cepat untuk navigasi admin, 
  seperti kembali ke dashboard, melihat semua transaksi, mengelola produk, dan tombol ekspor laporan 
  yang berfungsi sebagai aksi form POST ke endpoint /admin/save.

  Dengan struktur yang rapi dan penggunaan card sebagai kotak info, halaman ini memudahkan admin untuk memantau kinerja bisnis 
  dari sisi pendapatan dan transaksi secara langsung.

  Keterkaitan file ini:
  - Terhubung dengan AdminController.java di backend
  - Menggunakan data yang disediakan oleh TransactionService.java
  - Menggunakan fragments/header.html sebagai template layout

  Komponen penting tampilan yang digunakan:
  - Template layout Thymeleaf dengan layout:decorate
  - Data binding variabel totalRevenue, totalOrders, averageOrder, highestOrder dari model
  - Navigasi tombol dengan atribut th:href dan form POST untuk ekspor laporan
-->
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{fragments/header}">
<head>
  <title>Laporan Pendapatan - UAS PBO</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
  <div layout:fragment="content">
    <div class="container admin-dashboard">
      <h1 class="page-header">Laporan Pendapatan</h1>

      <!-- Main Revenue Stats -->
      <div class="card">
        <div class="card-header">
          Ikhtisar Pendapatan
        </div>
        <div class="card-body text-center">
          <div class="revenue-display">
            <div class="revenue-amount">Rp [[${#numbers.formatInteger(totalRevenue, 0, 'COMMA')}]]</div>
            <div class="revenue-label">Total Pendapatan yang Dihasilkan</div>
          </div>

          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-number" th:text="${totalOrders}">0</div>
              <div class="stat-label">Total Pesanan</div>
            </div>
            <div class="stat-card">
              <div class="stat-number" th:text="${#numbers.formatDecimal(averageOrder, 0, 'COMMA', 2, 'POINT')}">0</div>
              <div class="stat-label">Rerata Pesanan</div>
            </div>
            <!-- <div class="stat-card">
              <div class="stat-number">2</div>
              <div class="stat-label">Pelanggan Unik</div>
            </div> -->
            <!-- <div class="stat-card">
              <div class="stat-number">2</div>
              <div class="stat-label">Pelanggan Aktif</div>
            </div> -->
            <div class="stat-card">
              <div class="stat-number" th:text="${highestOrder}">0</div>
              <div class="stat-label">Pesanan Tertinggi</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="card">
        <div class="card-header">
          Tindakan Cepat
        </div>
        <div class="card-body">
          <div class="d-flex gap-3 flex-wrap">
            <a th:href="@{/admin}" class="btn btn-secondary">
              Kembali ke Dashboard
            </a>
            <a th:href="@{/admin/transactions}" class="btn btn-primary">
              Semua Transaksi
            </a>
            <a th:href="@{/admin/products}" class="btn btn-success">
              Kelola Produk
            </a>
            <form th:action="@{/admin/save}" method="post">
              <button type="submit" class="btn btn-warning">
                Ekspor Laporan
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
